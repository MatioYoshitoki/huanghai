<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="IE=Edge, Chrome=1">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <title>数据录入</title>
    <link rel="stylesheet" href="vendor/bootstrap-select/bootstrap-select.css">
    <link rel="stylesheet" href="vendor/bootstrap-datepicker/datepicker.css">
    <link rel="stylesheet" href="../asset/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/animate.min.css">

    <link rel="stylesheet" href="css/main.css">
    <!--[if lt IE 9]>
        <script src="js/html5shiv.js"></script>
        <script src="js/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<div class="app" data-sidebar="locked" id="client">
    <navbar :user="user" :message="message"></navbar>
    <section class="layout">
        <sidebar :links="sidebarLinks"></sidebar>
        <section class="main-content">
            <div class="content-wrap">
                <div class="row mg-b">
                    <div class="col-xs-12">
                        <h3 class="no-margin">数据录入</h3>
                        <small>手工往数据库内录入数据</small>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <section class="panel">
                            <div class="panel-body padding">
                                <form class="form-horizontal">
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label">TITLE</label>
                                        <div class="col-sm-11">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label">分类</label>
                                        <div class="col-sm-5">
                                            <select id="selectForType" class="form-control selectpicker" data-style="btn-primary"></select>
                                        </div>
                                        <label class="col-sm-1 control-label">EC2</label>
                                        <div class="col-sm-5">
                                            <select id="selectForEC2" class="form-control selectpicker" data-style="btn-primary"></select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label">LOCUS</label>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control">
                                        </div>
                                        <label class="col-sm-1 control-label">PDBID</label>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control">
                                        </div>
                                        <label class="col-sm-1 control-label">DATE</label>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label">DBSOURCE</label>
                                        <div class="col-sm-11">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label">SOURCE</label>
                                        <div class="col-sm-11">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label">ORGANISM</label>
                                        <div class="col-sm-11">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label">MICROBE</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control">
                                        </div>
                                        <label class="col-sm-1 control-label">COUNTRY</label>
                                        <div class="col-sm-2">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <h4 class="mg">REFERENCE 1：</h4>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label">TITLE</label>
                                        <div class="col-sm-11">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label">AUTHOR</label>
                                        <div class="col-sm-5">
                                            <input type="text" class="form-control">
                                        </div>
                                        <label class="col-sm-1 control-label">JOURNAL</label>
                                        <div class="col-sm-2">
                                            <input type="text" class="form-control">
                                        </div>
                                        <label class="col-sm-1 control-label">PUBMED</label>
                                        <div class="col-sm-2">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="btn btn-default center-block mg-b">新增引用</div>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label">ORIGIN</label>
                                        <div class="col-sm-11">
                                            <textarea class="form-control" rows="5"></textarea>
                                        </div>
                                    </div>
                                    <div class="btn btn-default center-block">提交数据</div>
                                </form>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </section>
    </section>
</div>
<script src="../asset/js/frame/jquery-1.11.1.min.js"></script>
<script src="bootstrap/js/bootstrap.js"></script>
<script src="../asset/js/frame/vue.js"></script>
<script src="vendor/bootstrap-select/bootstrap-select.js"></script>
<script src="vendor/bootstrap-datepicker/bootstrap-datepicker.js"></script>
<script src="../asset/easyDialog/js/easydialog.min.js"></script>
<script src="js/components/header.js"></script>
<script src="js/components/sidebar.js"></script>
<script src="js/base.js"></script>
<script src="config/config.js"></script>
<script>
    var Links = {
        methods: {},
        connect: function (data) {
            var method = data.method;
            try {
                if (!method) {
                    throw new Error("");
                }
                Links.methods[method].run(data.param);
            } catch (error) {
                console.warn(error);
            }
        }
    };
    Links.methods.get = {
        run: function (param) {
            $.ajax({
                type: "GET",
                url: param.url,
                data: param.data,
                success: param.successFn,
                error: param.errorFn
            });
        }
    };
    Links.methods.post = {
        run: function (param) {
            $.ajax({
                type: "POST",
                url: param.url,
                data: param.data,
                success: param.successFn,
                error: param.errorFn
            });
        }
    };
    var Client = new Vue({
        el: "#client",
        data: {
            user: {},
            message: [
                { username: "陈煦", operation: "修改了系统管理员身份"}
            ],
            sidebarLinks: Config.sidebar,
            record: {
                title: "",
                type: "",
                ec2: "",
                locus: "",
                pdbId: "",
                dbsource: "",
                source: "",
                organism: "",
                date: "",
                country: "",
                origin: "",
                author1: "",
                title1: "",
                journal1: "",
                pubmed1: "",
                abstract1: "",
                author2: "",
                title2: "",
                journal2: "",
                pubmed2: "",
                abstract2: "",
                author3: "",
                title3: "",
                journal3: "",
                pubmed3: "",
                abstract3: "",
                author4: "",
                title4: "",
                journal4: "",
                pubmed4: "",
                abstract4: ""
            }
        },
        components: {
            "navbar": header,
            "sidebar": sidebar
        },
        mounted: function () {
            this.$nextTick(function () {
                init(Client, function() {
                    Client.request("getParam");
                })
            })
        },
        methods: {
            hidePanelBody: function(event) {
                $(event.target).parent().parent().next().slideToggle("slow");
            },
            /**
             * 向后台发起请求
             * @param type 请求的类型
             */
            request: function(type) {
                var data = null,
                    url = null,
                    successFn = null,
                    errorFn = null,
                    item = null;

                if(type === "getParam") {
                    data = {};
                    url = Service.getUrl("getParam");
                    successFn = Client.getParamCallback;
                }
                Links.connect({
                    method: "post",
                    param: {
                        url: url,
                        data: data,
                        successFn: successFn,
                        errorFn: errorCallback
                    }
                });
            },
            getParamCallback: function(msg) {
                if(Number(msg.code) === 1) {
                    console.log(msg.data);
                }
            }
        }
    });
</script>
</body>
</html>